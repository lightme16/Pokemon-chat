{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="{% static 'img/favicon.png' %}">
    <title>Pokemon Chat | {{ request.user }}</title>
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/base_style.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <script src="{% static 'scripts/http_ajax.googleapis.com_ajax_libs_jquery_1.12.4_jquery.js' %}"></script>
</head>

<body>
<div class="container">
    <nav class="navbar navbar-light bg-faded" id="navbar">
        <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#navbar-header"
                aria-controls="navbar-header">
            &#9776;
        </button>
        <div class="collapse navbar-toggleable-xs" id="navbar-header">
            <a class="navbar-brand" href="#"><img src="{% static 'img/pokeball.png' %}" height=30 width=41></a>
            <form class="form-inline pull-xs-right" action="/logout/">
                <button class="btn bg-faded" type="submit"><i class="fa fa-sign-out" aria-hidden="true"></i>
                </button>
            </form>
        </div>
    </nav>
</div>

<div class="container">
    <div class="row row-content">
        <div class="col-xs-12" id="scrolable">
            <ul class="media-list pre-scrollable" id="msg_list">
                {% for post in messages %}
                    {% if post.user == request.user %}
                        <li class="media" id="media-l">
                            <div class="media-left ">
                                <a href="#">
                                    <img class="media-object img-thumbnail" src="{% static 'img/avatar1.jpg' %}">
                                </a>
                            </div>
                            <div class="media-body">
                                <h4 class="media-heading">{{ post.user }}</h4>
                                <small><i>{{ post.date }}</i></small>
                                <p>{{ post.message }}</p>
                            </div>
                        </li>
                    {% else %}
                        <li class="media" id="media-r">
                            <div class="media-body text-right">
                                <h4 class="media-heading">{{ post.user }}</h4>
                                <small><i>{{ post.date }}</i></small>
                                <p>{{ post.message }}</p>
                            </div>
                            <div class="media-right ">
                                <a href="#">
                                    <img class="media-object img-thumbnail" src="{% static 'img/avatar2.jpg' %}">
                                </a>
                            </div>
                        </li>
                    {% endif %}
                {% empty %} <!-- If history of messages is empty show wellome test -->
                    <div class="jumbotron">
                        <h1 class="display-3">Histoty is empty!</h1>
                        <p class="lead">There are no new messages today? No problem, just type something and some random
                            pokemon
                            definitly answer you.
                            I promise you!</p>
                        <img src="{% static 'img/PikachuWellcome.png' %}" height="182px" width="342px">
                    </div>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

<div class="navbar-fixed-bottom row-fluid">
    <div class="container">
        <form id="chat-form" method="post"> <!-- Form for sending ajax messages -->
            <div class="input-group input-group-lg">
                <span class="input-group-addon"><i class="fa fa-envelope" aria-hidden="true"></i><i class="fa fa-terminal fa-stack-1x fa-inverse"></i></span>
                <input type="text" class="form-control" id="new_msg" name='new_msg'
                       placeholder="Write your message here..." required>
                <span class="input-group-btn">
                    <button class="btn btn-warning" id="send_msg" type="submit"><i class="fa fa-paper-plane-o"
                                                                                   aria-hidden="true"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>
<script src="{% static 'scripts/main.js' %}"></script>
</body>
</html>
